# Docker Login Private Registry
aws ecr get-login-password --region eu-central-1 | sudo docker login --username AWS --password-stdin 205672091018.dkr.ecr.eu-central-1.amazonaws.com
# Docker Logout of Private Registry
sudo docker logout 205672091018.dkr.ecr.eu-central-1.amazonaws.com
# Pull Docker Image without Tag
sudo docker pull 205672091018.dkr.ecr.eu-central-1.amazonaws.com/meterverse_manager
# Tag Image
sudo docker tag 6764fe2aa53e 205672091018.dkr.ecr.eu-central-1.amazonaws.com/meterverse_manager:TAGGING_LABEL
# All Images without Tag with Name | only the first one 
sudo docker images -f "dangling=true" -q 205672091018.dkr.ecr.eu-central-1.amazonaws.com/meterverse_manager | head -1
# Tag Image with Tag with Previous Tag 
sudo docker tag $(sudo docker images -f "dangling=true" -q 205672091018.dkr.ecr.eu-central-1.amazonaws.com/meterverse_manager | head -1) 205672091018.dkr.ecr.eu-central-1.amazonaws.com/meterverse_manager:previous
# Cronjob
*/10 *  * * *   root    cd /home/ubuntu/customer_2 && echo "$(tail -1000 cron_log.log)" > cron_log.log && ./pull_and_restart.sh >> /home/ubuntu/customer_2/cron_log.log 2>&1
# Latest Image aus Repo mit prod taggen
MANIFEST=$(aws ecr batch-get-image --repository-name meterverse_manager --image-ids imageTag=latest --output text --query 'images[].imageManifest')
aws ecr put-image --repository-name meterverse_manager --image-tag prod --image-manifest "$MANIFEST"